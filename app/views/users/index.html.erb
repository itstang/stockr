<% provide(:title, 'All users') %>
<h1>All users</h1>

<%= form_tag(users_path, :method => "get", class: "navbar-form", id: "search-form") do %>
    <div class="input-append">
      <%= text_field_tag :search, params[:search], class: "span2", placeholder: "Search Users" %>

      <button class="btn" type="submit"><i class="icon-search">Search</i></button>
    </div>
<% end %>
<%= yield %>

<ul class="users">
  <% if (params[:search] == '') || (params[:search].nil?) %>
      <% @users.each do |user| %>
          <li>
            <%= gravatar_for user %>
            <%= link_to user.name, user %>
          </li>
      <% end %>
  <% else%>
      <% @users.where(name: params[:search]).each do |user| %>
          <li>
            <%= gravatar_for user %>
            <%= link_to user.name, user %>
          </li>
      <% end %>
  <% end %>
</ul>

<%= will_paginate %>
